# Слияния

Текущее состояние репозитория.  
<br>
<img src="resources/images/d_17.png" alt="Описание изображения" style="width: 50%;" />   
<br>

## Сливние
Слияние ```merge``` в Git представляет собой метод интеграции изменений из одной ветки в другую. В процессе слияния существует две ветки: ```исходная ветка``` (source branch), из которой берутся изменения, и ```целевой ветка``` (target branch), в которую эти изменения встраиваются. Исходная ветка содержит все нововведения, которые будут добавлены в целевую ветку. В результате операции слияния изменения применяются только к целевой ветке, что приводит к её обновлению.   
<br>  

Существует два типа слияний:  
• ускоренные слияния;  
• трехсторонние слияния.   
<br>  

## Ускоренное слияние  

```Ускоренное слияние``` — это разновидность слияния, которое происходит в том случае, если истории веток, участвующих в процессе, не расходятся. Иными словами, это возможно, когда можно добраться до целевой ветки, следуя по родительским ссылкам в истории коммитов исходной ветки. В процессе ускоренного слияния Git просто перемещает указатель целевой ветки на коммит исходной ветки.  
<br>  

<img src="resources/images/d_18.png" alt="Описание изображения" style="width: 50%;" />   
<br>  

Если я прослежу родительские ссылки ветки master назад, то обнаружу, что она включает коммиты A и B. Это означает, что история ветки master состоит из этих двух коммитов. В то же время история ветки chapter_six охватывает коммиты A, B, C, D и E.    
Если мы можем достичь одной ветки, прослеживая историю коммитов другой ветки, это означает, что их истории не разошлись. Например, если я прослежу родительские ссылки из ветки chapter_six, указывающей на коммит E, назад, я доберусь до ветки main, которая ссылается на коммит B. Таким образом, можно утверждать, что ветки main и chapter_six не разошлись.  
<br>  

<img src="resources/images/d_19.png" alt="Описание изображения" style="width: 50%;" />   
<br>  

Если бы я сейчас объединил ветку chapter_six с веткой master, это привело бы к ускоренному слиянию. В процессе ускоренного слияния указатель ветки master переместится вперед и начнет указывать на коммит, соответствующий ветке chapter_six, то есть на коммит E. В этом примере chapter_six является исходной веткой, а master — целевой. Указатель ветки master просто переместился вперед с коммита B на коммит E. Именно поэтому такие слияния часто называют ускоренной перемоткой вперед (fast-forward merge).

## Трехстороннее слияние  
Трехстороннее слияние происходит в тех случаях, когда истории веток, участвующих в процессе, расходятся. Истории считаются расходящимися, когда невозможно добраться до целевой ветки, следуя истории коммитов исходной ветки. В такой ситуации, при объединении исходной ветки с целевой, Git выполняет трехстороннее слияние, создавая коммит слияния для соединения двух историй разработки. После этого указатель целевой ветки перемещается на созданный коммит слияния.  
<br>  

Предположим, что последние два коммита в ветке main моего репозитория book - это коммиты F и G.  
<br>  

<img src="resources/images/d_20.png" alt="Описание изображения" style="width: 50%;" />   
<br>

Теперь предположим, что я решила создать ветку chapter _ eight для работы над главой 8 моей книги и делаю коммиты Н, I и J. Однако в то же время я вношу некоторые изменения в ветку main, и теперь она указывает на коммит L.  
<br>  

<img src="resources/images/d_21.png" alt="Описание изображения" style="width: 50%;" />   
<br>  

На рисунке вы можете видеть, что история разработки ветки chapter _ eight состоит из коммитов F, G, Н, I и J. С другой стороны, история ветки main состоит из коммитов F, G, К и L. Невозможно пройти по родительским ссылкам (представленным серыми стрелками) ветки chapter _ eight назад, чтобы достичь коммита, на который указывает ветка main, т. е. коммита L. В этой ситуации мы говорим, что истории развития веток разошлись.  
<br>  

Если я захочу объединить ветку chapter _ eight с веткой main, это не может быть быстрым слиянием, потому что невозможно просто переместить указатель ветки вперед, чтобы объединить эти две истории разработки. Вместо этого будет создан коммит слияния (назовем его коммитом М), чтобы связать две истории разработки вместе Коммит слияния - это коммит, имеющий более одного родителя. Он служит примером трехстороннего слияния (three-way merge). 
<br>  

<img src="resources/images/d_22.png" alt="Описание изображения" style="width: 50%;" />   
<br> 

Коммит М указывает на коммиты J и L. Причина, по которой этот вид слияния называется трехсторонним, заключается в том, что для выполнения слияния Git рассматривает два коммита, на которые указывают ветки, участвующие в слиянии (в случае репозитория book это коммиты J и L), а также коммит, который является общим предком этих двух коммитов, которым в данном случае является коммит G. Вот почему слияние "трехстороннее".   

## Выполнение ускоренного слияния  
Для отработки ускоренного слияния выполним сливние ветом master и feature.   
master - целевая;  
feature - исходная.  
<br>  

На диаграмме коммита видно, что до ветки master можно добраться из ветки feature - значит будет ускоренное сливяние.
<br>  

<img src="resources/images/d_23.png" alt="Описание изображения" style="width: 50%;" />   
<br> 
